<div class="div-body animate__animated animate__fadeInDown">
  <div>
    <button pButton pRipple type="button" label="Nueva" icon="pi pi-plus" class="p-button-success-app" (click)="nuevo()"></button>
    <div class="p-mt-2"></div>
    <div class="p-grid">
        <div class="p-col-12 p-md-6 p-lg-2">
          <label class="p-text-bold">Fecha</label>
        </div>
        <div class="p-col-12 p-md-6 p-lg-3">
            <label class="p-text-bold">Descripción</label>
        </div>
        <div class="p-col-12 p-md-6 p-lg-2">
            <label class="p-text-bold">Usuario</label>
        </div>
    </div>
    <div class="p-grid">
        <div class="p-col-12 p-md-6 p-lg-2">
          <p-calendar placeholder="dd/mm/aaaa" [showIcon]="true" inputId="icon"
                    dateFormat="dd/mm/yy" [(ngModel)]="fecha">
          </p-calendar>
        </div>
        <div class="p-col-12 p-md-6 p-lg-3">
            <input placeholder="Escriba aquí" type="text" [(ngModel)]="concepto">
        </div>
        <div class="p-col-12 p-md-6 p-lg-3">
          <input placeholder="Escriba aquí" type="text" [(ngModel)]="usuario">
        </div>
        <div class="p-col-12 p-md-6 p-lg-3">
          <div class="wrapper">
            <button pButton pRipple type="button" class="p-button-success-app" label="Buscar" (click)="filter()"></button>
            <div>
              <div class="p-mr-2"></div>
              <button pButton pRipple type="button" label="Limpiar" class="p-button-outlined" (click)="clean()"></button>
            </div>
          </div>
        </div>
    </div>
    <p-table *ngIf="datos.length > 0" 
      [value]="datos"
      scrollDirection="both"
      [scrollable]="true"
      scrollHeight="65vh"
      sortMode="single"
      (onSort)="sortColumn($event)"
      sortField="fecha" [sortOrder]="-1"
      styleClass="p-datatable-sm">
      <ng-template pTemplate="header">
          <tr>
              <th  pSortableColumn="fecha" class="percentage_10">
                Fecha
                <p-sortIcon field="fecha"></p-sortIcon>
              </th>
              <th class="percentage_25">
                Nombre del predio
              </th>
              <th class="percentage_20">
                Nombre del propietario
              </th>
              <th  pSortableColumn="valor" class="percentage_10">
                Tipo de visita
                <p-sortIcon field="valor"></p-sortIcon>
              </th>
              <th  pSortableColumn="fechaRegistro" class="percentage_15">
                Fecha de creación
                <p-sortIcon field="fechaRegistro"></p-sortIcon>
              </th>
              <th class="percentage_10">
                Usuario
              </th>
              <th class="percentage_10"></th>
          </tr>
      </ng-template>
      <ng-template pTemplate="body" let-objeto>
          <tr>
              <td class="percentage_10">
                {{objeto.fecha | date: 'dd/MM/yyyy'}}
                {{objeto.fechaAuditoria | date: 'dd/MM/yyyy'}}
              </td>
              <td class="column-app percentage_25">{{objeto.nombrePredio}}</td>
              <td class="column-app percentage_20">{{objeto.nombrePropietario}}</td>
              <td class="column-app percentage_10">{{objeto.tipoVisita}}</td>
              <td class="percentage_15">{{objeto.fechaRegistro | date: 'dd/MM/yyyy HH:mm:ss'}}</td>
              <td class="percentage_10" pTooltip="{{objeto.usuario}}">{{(objeto.usuario | slice:0:10) + '...'}}</td>
              <td class="percentage_10">
                <span class="pi pi-pencil funcionalidad animate__animated animate__zoomIn"
                  pTooltip="Editar comanda"
                  tooltipPosition="top"
                  p-tooltip-text (click)="editar(objeto)"></span>
                <div class="p-md-2"></div>
              </td>
          </tr>
      </ng-template>
    </p-table>
    <p-paginator
        *ngIf="count > 0"
        [pageLinkSize]="5"
        [showCurrentPageReport]="true" 
        [showFirstLastIcon]="false"
        currentPageReportTemplate="{first} - {last} de {totalRecords} ordenes" 
        [rows]="rows" [totalRecords]="count" 
        [rowsPerPageOptions]="[10,20,50]" 
        (onPageChange)="onPageChange($event)" data-cy="paginator">
    </p-paginator>
  </div>
  <div class="descripcion div-info " *ngIf="datos == null || datos.length == 0">
    <div style="font-size: 18px; font-family: 'Open sans'; display: flex;">
      <div style="margin: auto;">
        Opps! Tu búsqueda no arrojo ningún resultado
      </div>        
    </div>
  </div>
</div>

